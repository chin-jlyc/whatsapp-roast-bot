# WhatsApp Business Idea Roast Bot - User Guide

This guide provides instructions for setting up, using, and maintaining your WhatsApp bot that roasts business ideas using Google's Gemini AI.

## Overview

The WhatsApp Business Idea Roast Bot is a fun tool that listens to your WhatsApp group chats and roasts business ideas when mentioned. It uses:

- WhatsApp Web.js for WhatsApp integration
- Google's Gemini AI for generating witty roasts
- LocalAuth for persistent sessions

## Setup Instructions

### Local Setup (For Testing)

1. **Prerequisites**:
   - Node.js v22.10.0 or higher
   - A WhatsApp account
   - A Gemini API key from [Google AI Studio](https://ai.google.dev/)

2. **Installation**:
   ```bash
   # Clone the repository
   git clone https://github.com/yourusername/whatsapp-roast-bot.git
   cd whatsapp-roast-bot
   
   # Install dependencies
   npm install
   ```

3. **Configuration**:
   - Create a `.env` file in the project root
   - Add your Gemini API key and bot settings:
     ```
     GEMINI_API_KEY=your_api_key_here
     BOT_NAME=RoastBot
     BOT_TRIGGER=@RoastBot
     ```

4. **Running the Bot**:
   ```bash
   npm start
   ```

5. **Authentication**:
   - A QR code will appear in the terminal
   - Open WhatsApp on your phone
   - Go to Settings > Linked Devices
   - Tap "Link a Device" and scan the QR code

### Docker Setup

1. **Prerequisites**:
   - Docker installed on your machine
   - A WhatsApp account
   - A Gemini API key from [Google AI Studio](https://ai.google.dev/)

2. **Configuration**:
   - Create a `.env` file in the project root based on the `.env.example` template
   - Add your Gemini API key and customize bot settings as needed

3. **Building the Docker Image**:
   ```bash
   docker build -t whatsapp-roast-bot .
   ```

4. **Running the Container**:
   ```bash
   docker run -it --name roast-bot \
     --env-file .env \
     -v $(pwd)/.wwebjs_auth:/usr/src/app/.wwebjs_auth \
     whatsapp-roast-bot
   ```

5. **Authentication**:
   - A QR code will appear in the terminal
   - Scan it with your WhatsApp app as described in the local setup

6. **Running in Background**:
   - After initial authentication, you can run the container in detached mode:
   ```bash
   docker run -d --name roast-bot \
     --env-file .env \
     -v $(pwd)/.wwebjs_auth:/usr/src/app/.wwebjs_auth \
     --restart unless-stopped \
     whatsapp-roast-bot
   ```

### GCP Deployment

For 24/7 operation on Google Cloud Platform:

1. **Create a Compute Engine VM**:
   - Recommended: e2-micro or e2-small instance (1-2 vCPUs, 1-2 GB RAM)
   - OS: Ubuntu 22.04 LTS
   - Boot disk: 10 GB standard persistent disk

2. **Set Up the VM**:
   ```bash
   # Update system
   sudo apt-get update && sudo apt-get upgrade -y
   
   # Install Docker
   sudo apt-get install -y docker.io
   sudo systemctl enable --now docker
   sudo usermod -aG docker $USER
   # Log out and log back in for group changes to take effect
   ```

3. **Deploy the Bot**:
   ```bash
   # Clone the repository
   git clone https://github.com/yourusername/whatsapp-roast-bot.git
   cd whatsapp-roast-bot
   
   # Create .env file with your configuration
   nano .env
   
   # Build and run the Docker container
   docker build -t whatsapp-roast-bot .
   docker run -it --name roast-bot \
     --env-file .env \
     -v $(pwd)/.wwebjs_auth:/usr/src/app/.wwebjs_auth \
     whatsapp-roast-bot
   ```

4. **Scan the QR code** with your WhatsApp app

5. **Run in Background**:
   ```bash
   # Stop the interactive container
   docker stop roast-bot
   docker rm roast-bot
   
   # Run in detached mode with auto-restart
   docker run -d --name roast-bot \
     --env-file .env \
     -v $(pwd)/.wwebjs_auth:/usr/src/app/.wwebjs_auth \
     --restart unless-stopped \
     whatsapp-roast-bot
   ```

## Using the Bot

Once the bot is running and authenticated:

1. **Add the Bot to Groups**:
   - The WhatsApp account you used to authenticate will be your bot
   - Add this account to any group chats where you want to use the bot

2. **Triggering the Bot**:
   - Mention the bot using its trigger word (default: `@RoastBot`)
   - Include a business idea in the same message
   - Example: `@RoastBot I want to create an app that delivers ice cream via drones`

3. **Bot Response**:
   - The bot will process the business idea
   - It will reply with a humorous roast generated by Gemini AI
   - The roast will be funny but not cruel

## Customization

### Changing the Bot Name and Trigger

Edit the `.env` file to change:
- `BOT_NAME`: The display name for your bot
- `BOT_TRIGGER`: The mention text that activates the bot

### Modifying the Roasting Style

To change how the bot roasts business ideas:
1. Open `src/gemini.js`
2. Find the prompt text in the `roastBusinessIdea` function
3. Modify the instructions to change the tone, style, or format of the roasts

### Adding New Features

The bot is built with a modular structure, making it easy to extend:
- Add new commands by modifying the message handler in `src/index.js`
- Integrate additional AI capabilities by expanding the Gemini integration

## Troubleshooting

### Docker Issues
- If the container exits unexpectedly, check logs with `docker logs roast-bot`
- If you need to restart the container: `docker restart roast-bot`
- To view QR code again, you may need to remove the auth volume and restart:
  ```bash
  docker stop roast-bot
  docker rm roast-bot
  rm -rf .wwebjs_auth
  # Then run the container again in interactive mode
  ```

### QR Code Issues
- If you can't scan the QR code, restart the bot
- Make sure your phone has a stable internet connection

### Authentication Problems
- If the bot disconnects frequently, delete the `.wwebjs_auth` directory and restart
- You'll need to scan the QR code again after deleting this directory

### Gemini API Issues
- Verify your API key is correct in the `.env` file
- Check the logs for specific error messages
- Ensure you have sufficient quota in your Google AI Studio account

### Bot Not Responding
- Confirm the bot is running and shows "WhatsApp client is ready!"
- Verify you're using the correct trigger word
- Check if the WhatsApp account is properly connected

## Maintenance

### Keeping the Bot Running
- For local testing, the bot will run as long as your terminal is open
- For Docker, the `--restart unless-stopped` flag ensures the container restarts automatically
- For GCP, the VM will keep running until stopped or crashed

### Updating the Bot
```bash
# Pull the latest changes
git pull

# Rebuild and restart the Docker container
docker stop roast-bot
docker rm roast-bot
docker build -t whatsapp-roast-bot .
docker run -d --name roast-bot \
  --env-file .env \
  -v $(pwd)/.wwebjs_auth:/usr/src/app/.wwebjs_auth \
  --restart unless-stopped \
  whatsapp-roast-bot
```

## Security Considerations

- Keep your Gemini API key secure
- Don't share your `.wwebjs_auth` directory
- Be mindful of WhatsApp's terms of service regarding bots
- Consider the privacy implications of adding the bot to group chats

## Resources

- [WhatsApp Web.js Documentation](https://wwebjs.dev/guide/)
- [Google Gemini API Documentation](https://ai.google.dev/gemini-api/docs/quickstart)
- [Docker Documentation](https://docs.docker.com/)
- [Google Cloud Platform Documentation](https://cloud.google.com/docs)

## Support

If you encounter issues or have questions:
- Check the troubleshooting section
- Review the documentation
- Consult the WhatsApp Web.js community

Enjoy your WhatsApp Business Idea Roast Bot!
